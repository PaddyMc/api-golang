FROM golang:latest as build

RUN go get github.com/PaddyMc/go-tron/calculations
RUN go get github.com/diadata-org/api-golang/dia

WORKDIR $GOPATH/src/

COPY . .

WORKDIR $GOPATH/src/cmd/trx

RUN go install

FROM gcr.io/distroless/base

COPY --from=build /go/bin/trx /bin/trx

CMD ["trx"]